{% extends 'layout.html' %}

{% block content %}
  <div class="container mt-5" style="position: relative;">
    <div class="d-flex justify-content-between align-items-center">
      <h1 class="mb-4" style="color: #7d1324;">{{ actor.name }}</h1>
      <div>
        {% comment %}Edit Button{% endcomment %}
        {% if user.is_authenticated and perms.app.change_actor and perms.app.delete_actor %}
          <a href="{% url 'edit_actor' actor.id %}" class="btn btn-secondary me-2"><i class="fas fa-edit"></i> Edit</a>

          {% comment %}Delete Button{% endcomment %}
          <form method="post" action="{% url 'delete_actor' actor.id %}" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this actor?');">
            {% csrf_token %}
            <button type="submit" class="btn btn-danger"><i class="fas fa-trash"></i> Delete</button>
          </form>
        {% endif %}
      </div>
    </div>

    <div class="row">
      <div class="col-md-8">
        <div class="card" style="border: 1px solid #7d1324;">
          <div class="card-body" style="padding: 20px;">
            <h5 class="card-title" style="color: #7d1324;">Information</h5>

            <p class="card-text" style="color: #343a40; font-size: 1.1em; font-weight: 500;">
              <strong>Full name:</strong> {{ actor.name }}
            </p>

            <p class="card-text" style="color: #343a40; font-size: 1.1em; font-weight: 500;">
              <strong>Date of Birth:</strong> {{ actor.date_of_birth }}
            </p>

            <p class="card-text" style="color: #343a40; font-size: 1.1em; font-weight: 500;">
              <strong>Place of Birth:</strong> {{ actor.place_of_birth }}
            </p>

            {% if actor.date_of_death %}
              <p class="card-text" style="color: #343a40; font-size: 1.1em; font-weight: 500;">
                <strong>Date of death:</strong> {{ actor.date_of_death }}
              </p>
            {% endif %}

            <p class="card-text" style="color: #343a40; font-size: 1.1em; font-weight: 500;">
              <strong>Movies:</strong>
              <div style="display: flex; flex-wrap: wrap; gap: 8px; margin-top: 8px;">
                {% if movies %}
                  {% for movie in movies %}
                    <a href="{% url 'movie_details' movie.id %}"><span class="badge badge-pill" style="
                    padding: 8px 12px;
                    background-color: #7d1324;
                    color: white;
                    font-size: 0.9em;
                    font-weight: 600;
                    border-radius: 15px;
                    transition: background-color 0.3s;
                    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                " onmouseover="this.style.backgroundColor='#bb2d3b'" onmouseout="this.style.backgroundColor='#7d1324'">{{ movie.title }}</span></a>
                  {% endfor %}
                {% else %}
                  <span style="color: #6c757d; font-style: italic;">No movies available.</span>
                {% endif %}
              </div>
            </p>

            {% if actor.biography %}
              <p class="card-text" style="color: #495057; font-size: 1.1em; font-weight: 500; line-height: 1.6; margin-top: 10px;">
                <strong style="display: block; color: #343a40; font-size: 1.2em; margin-bottom: 5px;">Biography:</strong>
                {{ actor.biography }}
              </p>
            {% endif %}
          </div>
        </div>
      </div>

      <div class="col-md-4">
        {% if actor.picture %}
          <img src="{{ actor.picture.url }}" alt="{{ actor.name }} poster" class="img-fluid" style="border-radius: 8px; width:100%" />
        {% else %}
          <p>No profile picture available.</p>
        {% endif %}
      </div>
    </div>
  </div>

  <style>
.heart:hover i {
    transform: scale(1.2);
    color: #ff4081;
}
</style>
{% endblock %}
